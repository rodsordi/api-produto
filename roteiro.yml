criar conta:
  - https://hub.docker.com/explore
  - https://app.localstack.cloud

instalar:
  - intellij community
  - docker desktop
  - dbeaver community

setup:
  docker desktop:
    - abrir programa na inicialização (windows)
  dbeaver:
    - download driver postgres
  intellij:
    - docker plugin

docker:
  comandos:
    # image
    - docker image ls
    - docker rmi -f $(docker image ls -q)
    # container
    - docker ps -a
    - docker rm -f $(docker ps -aq)
    - docker start postgres
    - docker stop postgres
    # network
    - docker network ls
    - docker network rm $(docker network ls -q)
  containers:
    - docker run -d -p 5432:5432 --name postgres -e POSTGRES_PASSWORD=postgres postgres
    - docker run -d -p 4566:4566 -p 4510-4559:4510-4559 --name=localstack localstack/localstack
    - docker run -d -p 5672:5672 -p 9090:15672 --name=rabbitmq rabbitmq
    - docker run -d -p 6379:6379 --name=redis redis
    # zipkin
    - docker run -d
    # grafana
    - docker run -d

aplicação:
  - application/src/main/java/Application.java
  - spring.profiles.active=local,infra_local

cURLs:
  criar produto: |
    curl --location 'http://localhost:8080/api/v1/produtos' \
    --header 'Content-Type: application/json' \
      --data '{
    "nome": "Produto 1",
    "categoria": "Categoria 1",
    "status": "AVAILABLE",
    "descricao": "Descrição do produto 1",
    "valor": 1.99,
    "fotos": [
      {
        "fileName": "produto.png",
        "base64": "iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAdgAAAHYBTnsmCAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEnSURBVDiNldK/K0ZhFAfwj9ePDYPsb90yGJiY9I6krDIYTO/CH8CipBSyE7tClMUgq0FmiyIkZSWSheGey3V7L/nW6Xnu9znf7z3POQ+/oxpRiqYSPsFc7D9iXcHVXwYJZlFBO26who7gS40SbOIai2gJfgA7IeqOvK3ITTJxDU8YDuEUjmItGq2G0Uhoas0YxAWGMIZtbKAPS2FyjF104QRtOMB7E8bjL3t+Nm8Zt5iMau7xhtboS69ciRmuUC8YwWuYzWMhL6hojMzoNCKbwCFG84nFCop4ye3rmJGO96HsCmV4ljZtv3hQwSMm5ObaAHeYzn0noXnMiCrWpSPsySWO+55Sw7ziU65KG9Yp7XZ/8OcF/vKXar9K3MRZxI+n+x8kfwk/AT/iPUZGpHfDAAAAAElFTkSuQmCC"
      }
    ],
    "tags": [
      "tag 1"
    ]
    }'

Network:
  - api-produto_default
  - Diff application-infra_${env}.properties

RabbitMQ:
  - https://hub.docker.com/_/rabbitmq
  - config porta host':'container
  - http://localhost:9090/

Postgres:
  - https://hub.docker.com/_/postgres
  - dbeaver

Redis:
  - https://hub.docker.com/_/redis

Localstack:
  - https://hub.docker.com/r/localstack/localstack
  - https://app.localstack.cloud

Dockerfile:
  - https://docs.docker.com/reference/dockerfile/
  - mvn clean install -DskipTests
  - docker build -t api-produto .
  - uncomment api in docker-compose.yml
  - docker compose up