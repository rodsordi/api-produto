treinamento:
  entrega: até 25/dez
  duração: 2h30-3h
  qtd-aulas: 5
  público-alvo:
    - desenvolvedores back-end java iniciantes
  conteúdo:
    - apresentar o conceito de containers
    - apresentar na prática como executar comandos docker
    - apresentar docker compose (portas, volumes, networks)
    - apresentar como aplicar no dia a dia, visitar o dockerhub, ler documentação
  referências:
    - https://cursos.alura.com.br/course/devops-construindo-gerindo-containers-docker

pré-requisitos:
  criar contas:
    - https://hub.docker.com/explore
    - https://app.localstack.cloud

  instalar apps:
    - intellij community
    - docker desktop
    - dbeaver community

setup:
  docker desktop:
    - inicializar: sempre abrir o programa docker desktop na inicialização do windows
  dbeaver:
    - download: driver postgres
  intellij:
    - instalar: plugin docker
    - instalar: plugin lombok

aplicação:
  - executar: application/src/main/java/Application.java
  - declarar parâmetro: spring.profiles.active=local,infra_local

docker:
  comandos:
    # image
    - docker image ls
    - docker rmi -f $(docker image ls -q)
    # container
    - docker ps -a
    - docker rm -f $(docker ps -aq)
    - docker start postgres
    - docker stop postgres
    # network
    - docker network ls
    - docker network rm $(docker network ls -q)
  containers:
    - docker run -d -p 5432:5432 --name postgres -e POSTGRES_PASSWORD=postgres postgres
    - docker run -d -p 4566:4566 -p 4510-4559:4510-4559 --name=localstack localstack/localstack
    - docker run -d -p 5672:5672 -p 9090:15672 --name=rabbitmq rabbitmq
    - docker run -d -p 6379:6379 --name=redis redis
    - docker run -d -p 9411:9411 --name zipkin openzipkin/zipkin
    # zipkin
    - docker run -d
    # grafana
    - docker run -d

cURLs:
  criar produto: |
    curl --location 'http://localhost:8080/api/v1/produtos' \
    --header 'Content-Type: application/json' \
      --data '{
    "nome": "Produto 1",
    "categoria": "Categoria 1",
    "status": "AVAILABLE",
    "descricao": "Descrição do produto 1",
    "valor": 1.99,
    "fotos": [
      {
        "fileName": "produto.png",
        "base64": "iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAdgAAAHYBTnsmCAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEnSURBVDiNldK/K0ZhFAfwj9ePDYPsb90yGJiY9I6krDIYTO/CH8CipBSyE7tClMUgq0FmiyIkZSWSheGey3V7L/nW6Xnu9znf7z3POQ+/oxpRiqYSPsFc7D9iXcHVXwYJZlFBO26who7gS40SbOIai2gJfgA7IeqOvK3ITTJxDU8YDuEUjmItGq2G0Uhoas0YxAWGMIZtbKAPS2FyjF104QRtOMB7E8bjL3t+Nm8Zt5iMau7xhtboS69ciRmuUC8YwWuYzWMhL6hojMzoNCKbwCFG84nFCop4ye3rmJGO96HsCmV4ljZtv3hQwSMm5ObaAHeYzn0noXnMiCrWpSPsySWO+55Sw7ziU65KG9Yp7XZ/8OcF/vKXar9K3MRZxI+n+x8kfwk/AT/iPUZGpHfDAAAAAElFTkSuQmCC"
      }
    ],
    "tags": [
      "tag 1"
    ]
    }'

Network:
  - api-produto_default
  - Diff application-infra_${env}.properties

RabbitMQ:
  - https://hub.docker.com/_/rabbitmq
  - config porta host':'container
  - http://localhost:9090/

Postgres:
  - https://hub.docker.com/_/postgres
  - dbeaver

Redis:
  - https://hub.docker.com/_/redis

Localstack:
  - https://hub.docker.com/r/localstack/localstack
  - https://app.localstack.cloud

Zipkin:
  - https://hub.docker.com/r/openzipkin/zipkin
  - http://localhost:9411/zipkin/

Dockerfile:
  - https://docs.docker.com/reference/dockerfile/
  - mvn clean install -DskipTests
  - docker build -t api-produto .
  - uncomment api in docker-compose.yml
  - docker compose up

repositório:
  branch-final:
    - rm rascunho.yml roteiro.yml Dockerfile docker-compose.yml